%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%
%%%% This text file is part of the source of 
%%%% `Introduction to High-Performance Scientific Computing'
%%%% by Victor Eijkhout, copyright 2012
%%%%
%%%% This book is distributed under a Creative Commons Attribution 3.0
%%%% Unported (CC BY 3.0) license and made possible by funding from
%%%% The Saylor Foundation \url{http://www.saylor.org}.
%%%%
%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[11pt,letterpaper,twoside,openany]{boek3}
%\documentclass{book}

\usepackage[pdftex,colorlinks]{hyperref}
\usepackage[all]{hypcap}

\usepackage{comment,verbatim}
\makeatletter
\def\verbatim@startline{\verbatim@line{\leavevmode\kern\unitindent\relax}}
\makeatother

\newif\ifIncludeAnswers
\IncludeAnswersfalse
\input inex
\includecomment{gpu}

\usepackage{amssymb}
\usepackage[fleqn]{amsmath}
\usepackage{graphicx,undertilde,arydshln,wrapfig}
\usepackage{times,makeidx,multirow,multicol}
\usepackage{dirtree}

\usepackage[algo2e,noline,noend]{algorithm2e}
\newenvironment{displayalgorithm}
 {\par
  \begin{algorithm2e}[H]\leftskip=\unitindent \parskip=0pt\relax
  \DontPrintSemicolon
  \SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
 }
 {\end{algorithm2e}\par}
\newenvironment{displayprocedure}[2]
 {\everymath{\strut}
  \begin{procedure}[H]\leftskip=\unitindent\caption{#1(#2)}}
 {\end{procedure}}

% for edmond
\usepackage{subfigure,algorithmic,algorithm}

\def\lulurevision{2014}

\usepackage{minitoc}
\dominitoc[n]

%
% page layout
%
\usepackage{geometry}
\addtolength{\textwidth}{.5in}
\addtolength{\textheight}{.5in}
\addtolength{\evensidemargin}{-.5in}

\usepackage{fancyhdr}
\pagestyle{fancy}\fancyhead{}\fancyfoot{}
% remove uppercase from fancy defs
\makeatletter
\def\chaptermark#1{\markboth {{\ifnum \c@secnumdepth>\m@ne
 \thechapter. \ \fi #1}}{}}
\def\sectionmark#1{\markright{{\ifnum \c@secnumdepth >\z@
 \thesection. \ \fi #1}}}
\makeatother
% now the fancy specs
%\fancyhead[LE]{\thepage \hskip.5\unitindent/\hskip.5\unitindent \leftmark}
%\fancyhead[RO]{\rightmark \hskip.5\unitindent/\hskip.5\unitindent \thepage}
\fancyhead[LE]{\leftmark}
\fancyfoot[LE]{\thepage}
\fancyhead[RO]{\rightmark}
\fancyfoot[RO]{\thepage}
\fancyfoot[RE]{\footnotesize\sl Introduction to High Performance
  Scientific Computing}
\fancyfoot[LO]{\footnotesize\sl Victor Eijkhout}

\input exmacs-public

\newwrite\nx
\newcommand\CHAPTER[2]{
\Level 0 {#1}\label{ch:#2}
\def\chapshortname{#2}
{\SetBaseLevel 1 \input chapters-public/#2
 \write\chapterlist{\chapshortname}
 \openout\nx=exercises-public/\chapshortname-nx.tex
 \write\nx{\arabic{excounter}}
 \closeout\nx
 \SetBaseLevel 0
}}

\includecomment{tutorials}
\newcommand\TUTORIAL[2]{
\vfill\pagebreak \Level 0 {#1}\label{tut:#2}
\def\chapshortname{#2}\setcounter{excounter}0\relax
{\SetBaseLevel 1 \input tutorials-public/#2
\write\chapterlist{\chapshortname}
\openout\nx=exercises-public/\chapshortname-nx.tex
\write\nx{\arabic{excounter}}
\closeout\nx
\SetBaseLevel 0
}}
\newif\ifprojects\projectsfalse
\newcommand\PROJECT[2]{
\ifprojects \vfill\pagebreak \else \projectstrue \fi
\Level 1 {#1}\label{prj:#2}
\def\chapshortname{#2}
{\SetBaseLevel 2 \input projects-public/#2
\write\chapterlist{\chapshortname}
\openout\nx=exercises-public/\chapshortname-nx.tex
\write\nx{\arabic{excounter}}
\closeout\nx
\SetBaseLevel 0
}}
\newcommand\APPENDIX[3]{
  \vfill\pagebreak \Level 0 {#1}\label{app:#3}
  \def\chapshortname{#3}
  {\SetBaseLevel 1 {\index{#2|(}}
   \setcounter{excounter}0
   \input appendices-public/#3 {\index{#2|)}}
   \write\chapterlist{\chapshortname}
   \openout\nx=exercises-public/\chapshortname-nx.tex
   \write\nx{\arabic{excounter}}
   \closeout\nx
   \SetBaseLevel 0
  }
}
\newcommand\APPENDIXac[3]{
  \vfill\pagebreak \Level 0 {#1}\label{app:#3}
  \def\chapshortname{#3}
  {\SetBaseLevel 1 {\indexacstart{#2}}
   \setcounter{excounter}0
   \input appendices-public/#3 {\indexacend{#2}}
   \write\chapterlist{\chapshortname}
   \openout\nx=exercises-public/\chapshortname-nx.tex
   \write\nx{\arabic{excounter}}
   \closeout\nx
   \SetBaseLevel 0
}}

\newcommand\maillink[3]{
  \href{mailto:eijkhout@tacc.utexas.edu?subject=comment on section #1 "#2"}
    {comments on this #3?}\par
}
\renewcommand\maillink[3]{}

\usepackage{outliner}
\OutlineLevelStart0{\chapter{#1}
  \maillink{arabic{chapter} "#1"}{#1}{chapter}
}
\OutlineLevelStart1{\section{#1}
\maillink{\arabic{chapter}.\arabic{section}}{#1}{section}
}
\OutlineLevelCont1{\section{#1}
\maillink{\arabic{chapter}.\arabic{section}}{#1}{section}
}
\OutlineLevelStart2{\subsection{#1}
  \maillink
    {\arabic{chapter}.\arabic{section}.\arabic{subsection}}{#1}{subsection}
}
\OutlineLevelStart3{\subsubsection{#1}}
\setcounter{secnumdepth}{4}
\OutlineLevelStart4{\paragraph{\bf #1}}

\newcommand\heading[1]{\paragraph*{\textbf{#1}}}

\input scimacs
\input tutmacs

\makeindex
%\tracingmacros=2
%\tracingcommands=2

\def\publicdraft{{\bf\normalsize \\Evolving Copy - open for comments}}
\def\revdate{2nd edition 2014}
\begin{lulu}
\def\publicdraft{}
\end{lulu}
\author{Victor Eijkhout\\ with\\Edmond Chow, Robert van de Geijn}
\title{Introduction to High Performance Scientific Computing
\publicdraft
}
\expandafter\date\expandafter{\revdate}

\newwrite\chapterlist \openout\chapterlist=chapternames.tex

\begin{document}
%\dosecttoc
\maketitle

\input copyright
\input introduction

\vfill\pagebreak 
{\setcounter{tocdepth}{1}
\tableofcontents
\setcounter{tocdepth}{2}
}

\part{Theory}

\CHAPTER{Sequential Computing}{sequential}
\CHAPTER{Parallel Computing}{parallel}
\CHAPTER{Computer Arithmetic}{arithmetic}
\begin{comment}
\CHAPTER{Approximation}{approximation}
\end{comment}
\CHAPTER{Numerical treatment of differential equations}{odepde}
\CHAPTER{Numerical linear algebra}{linear}
\CHAPTER{High performance linear algebra}{parallellinear}

\part{Applications}

\CHAPTER{Molecular dynamics}{md}
\CHAPTER{Sorting}{sorting}
\CHAPTER{Graph analytics}{graphalgorithms}
\CHAPTER{Discrete systems}{discrete}
\begin{montecarlo}
\CHAPTER{Monte Carlo Methods}{montecarlo}
\end{montecarlo}
\begin{notready}
\CHAPTER{Computational biology}{bio}
\CHAPTER{Big data}{analytics}
\end{notready}

% not for public consumption
\begin{notready}
\CHAPTER{Lattice-Boltzmann methods}{lbm}
\end{notready}

\begin{comment}
%%\CHAPTER{Performance measurement and optimization}{performance}
%%\CHAPTER{Applications}{applications}
%%\CHAPTER{Scientific Programming}{programming}
\end{comment}

\part{Appendices}
\setcounter{tocdepth}{1}
%\vfill\pagebreak
%\appendix
%\makeatletter
%\renewcommand\theexcounter{\@arabic\c@section.\@arabic\c@excounter}
%\renewcommand\exercisenumber{\Alph{chapter}.\arabic{section}.\arabic{excounter}}
%\makeatother
%\addcontentsline{toc}{toc}{Appendices}

%\Level 0 {Theoretical background}

\input appendices-public/blurb

\APPENDIX{Linear algebra}{linear algebra}{norms}
\APPENDIX{Complexity}{complexity}{complexity}
\APPENDIX{Partial Differential Equations}{partial differential equations}{pde}
\APPENDIX{Taylor series}{Taylor series}{taylor}
\APPENDIX{Graph theory}{graph!theory}{graph}
\begin{notready}
\APPENDIX{Fourier Transforms}{Fourier Transform}{fft}
\end{notready}
\APPENDIXac{Automata theory}{FSA}{fsa}

\begin{tutorials}
\part{Tutorials}
%\Level 0 {Practical tutorials}
\label{app:practical}

\input tutorials-public/blurb
%\minitoc

\TUTORIAL{Unix intro}{unix}
\TUTORIAL{Compilers and libraries}{compile}
\TUTORIAL{Managing projects with Make}{gnumake}
\TUTORIAL{Source code control}{svn}
\TUTORIAL{Scientific Data Storage}{hdf5}
\TUTORIAL{Scientific Libraries}{petsc}
\TUTORIAL{Plotting with GNUplot}{gnuplot}
\TUTORIAL{Good coding practices}{coding}
\TUTORIAL{Debugging}{debug}
\begin{notready}
\TUTORIAL{Performance measurement}{performance}
\end{notready}
\TUTORIAL{C/Fortran interoperability}{language}
\TUTORIAL{\LaTeX{} for scientific documentation}{latex}

\end{tutorials}

\part{Projects, codes, index}

\Level 0 {Class projects}

\PROJECT{Cache simulation and analysis}{cache}
\PROJECT{Evaluation of Bulk Synchronous Programming}{bsp}
\PROJECT{Heat equation}{heat}
\PROJECT{The memory wall}{wall}

\Level 0 {Codes}
\label{app:codes}
\input appendices-public/codes

\vfill\pagebreak

\bibliography{scicompbook}
\bibliographystyle{plain}
\vfill\pagebreak

\Level 0 {Index and list of acronyms}

%\def\acitem#1#2{\item[#1] #2}
\def\acitem#1#2{\item[#1]{#2}\index{#1|see{#2}}}
\def\acitemi#1#2#3{\item[#1]{#2}\index{#1|see{#3}}}

%\hbox{}\vskip-1in\hbox{}

\begin{multicols}{2}
\begin{description}
\input acronyms
%% \acitem{AMR}{Adaptive Mesh Refinement}
%% \acitem{AVX}{Advanced Vector Extensions}
%% \acitem{BEM}{Boundary Element Method}
%% \acitem{BFS}{Breadth-First Search}
%% \acitem{BSP}{Bulk Synchronous Parallel}
%% \acitem{BLAS}{Basic Linear Algebra Subprograms}
%% \acitem{BVP}{Boundary Value Problem}
%% \acitem{CAF}{Co-array Fortran}
%% \acitem{CCS}{Compressed Column Storage}
%% \acitem{CG}{Conjugate Gradients}
%% \acitem{CGS}{Classical Gram-Schmidt}
%% \acitem{COO}{Coordinate Storage}
%% \acitem{CRS}{Compressed Row Storage}
%% %\acitem{CSV}{comma-separated values}
%% \acitem{DAG}{Directed Acyclic Graph}
%% \acitem{DSP}{Digital Signal Processing}
%% \acitem{FD}{Finite Difference}
%% \acitem{FDM}{Finite Difference Method}
%% \acitem{FEM}{Finite Element Method}
%% \acitem{FFT}{Fast Fourier Transform}
%% \acitem{FMA}{Fused Multiply-Add}
%% \begin{fmm}
%% \acitem{FMM}{Fast Multipole Method}
%% \end{fmm}
%% \acitem{FOM}{Full Orthogonalization Method}
%% \acitem{FPGA}{Field-Programmable Gate Array}
%% \acitem{FPU}{Floating Point Unit}
%% \acitem{FSA}{Finite State Automaton}
%% \acitem{FSB}{Front-Side Bus}
%% \acitem{GMRES}{Generalized Minimum Residual}
%% \acitem{GPGPU}{General Purpose Graphics Processing Unit}
%% \acitem{GPU}{Graphics Processing Unit}
%% \acitem{GS}{Gram-Schmidt}
%% \acitem{HPC}{High Performance Computing}
%% \acitem{HPF}{High Performance Fortran}
%% \acitem{IBVP}{Initial Boundary Value Problem}
%% \acitem{ILP}{Instruction Level Parallelism}
%% \acitem{ILU}{Incomplete LU}
%% \acitem{IVP}{Initial Value Problem}
%% \acitem{LAN}{Local Area Network}
%% \acitem{LBM}{Lattice-Boltzmann Methods}
%% \acitem{LRU}{Least Recently Used}
%% \acitemi{MGS}{Modified Gram-Schmidt}{Gram-Schmidt!modified}
%% \acitemi{MIC}{Many Integrated Cores}{Intel!MIC}
%% \acitem{MIMD}{Multiple Instruction Multiple Data}
%% \acitem{MPI}{Message Passing Interface}
%% \acitem{MSI}{Modified-Shared-Invalid}
%% \acitem{MTA}{Multi-Threaded Architecture}
%% \acitem{NUMA}{Non-Uniform Memory Access}
%% \acitem{ODE}{Ordinary Diffential Equation}
%% \acitem{OS}{Operating System}
%% \acitem{PGAS}{Partitioned Global Address Space}
%% \acitem{PDE}{Partial Diffential Equation}
%% \acitem{PRAM}{Parallel Random Access Machine}
%% \acitem{RDMA}{Remote Direct Memory Access}
%% \acitem{SAN}{Storage Area Network}
%% \acitem{SaaS}{Software as-a Service}
%% \acitem{SFC}{Space-Filling Curve}
%% \acitem{SIMD}{Single Instruction Multiple Data}
%% \acitem{SIMT}{Single Instruction Multiple Thread}
%% \acitem{SM}{Streaming Multiprocessor}
%% \acitem{SMP}{Symmetric Multi Processor}
%% \acitem{SOR}{Successive Over-Relaxation}
%% \acitem{SP}{Streaming Processor}
%% \acitem{SPMD}{Single Program Multiple Data}
%% \acitem{SPD}{symmetric positive definite}
%% \acitem{SSE}{SIMD Streaming Extensions}
%% \acitem{TLB}{Translation Look-aside Buffer}
%% \acitem{UMA}{Uniform Memory Access}
%% \acitem{UPC}{Unified Parallel C}
%% \acitem{WAN}{Wide Area Network}
\end{description}
\end{multicols}

\index{CPU-bound|see{compute-bound}}
\index{directives|see{compiler, directives}}
\index{halo|see{ghost region}}
\index{irreducible|see{reducible}}
\index{modified Gramm-Schmidt|see{Gram-Schmidt, modified}}
\index{Roadrunner|see{IBM!Roadrunner}}
\index{cluster!node|see{node}}
\printindex

\closeout\chapterlist
\end{document}
